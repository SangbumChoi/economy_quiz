#!/usr/bin/env python3
"""
ìƒ˜í”Œ í€´ì¦ˆ ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì¶”ê°€í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸
"""

import requests
import json
import time

# ìƒ˜í”Œ í€´ì¦ˆ ë°ì´í„°
SAMPLE_QUIZZES = [
    {
        "question": "ì¸í”Œë ˆì´ì…˜ì´ë€ ë¬¼ê°€ê°€ ì§€ì†ì ìœ¼ë¡œ ìƒìŠ¹í•˜ëŠ” í˜„ìƒì„ ì˜ë¯¸í•œë‹¤.",
        "answer": True,
        "explanation": "ì¸í”Œë ˆì´ì…˜ì€ ì¼ë°˜ì ìœ¼ë¡œ ë¬¼ê°€ìˆ˜ì¤€ì´ ì§€ì†ì ìœ¼ë¡œ ìƒìŠ¹í•˜ëŠ” í˜„ìƒì„ ë§í•©ë‹ˆë‹¤. ì´ëŠ” í†µí™”ëŸ‰ ì¦ê°€, ìˆ˜ìš” ì¦ê°€, ê³µê¸‰ ê°ì†Œ ë“±ì˜ ìš”ì¸ìœ¼ë¡œ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "category": "ê¸°ë³¸ê²½ì œê°œë…",
        "difficulty": "easy"
    },
    {
        "question": "GDPëŠ” êµ­ë‚´ì´ìƒì‚°ì„ ì˜ë¯¸í•˜ë©°, í•œ ë‚˜ë¼ì˜ ê²½ì œ ê·œëª¨ë¥¼ ì¸¡ì •í•˜ëŠ” ì§€í‘œì´ë‹¤.",
        "answer": True,
        "explanation": "GDP(Gross Domestic Product)ëŠ” êµ­ë‚´ì´ìƒì‚°ìœ¼ë¡œ, íŠ¹ì • ê¸°ê°„ ë™ì•ˆ í•œ ë‚˜ë¼ ë‚´ì—ì„œ ìƒì‚°ëœ ëª¨ë“  ìµœì¢…ì¬í™”ì™€ ì„œë¹„ìŠ¤ì˜ ì‹œì¥ê°€ì¹˜ë¥¼ í•©í•œ ê²ƒì…ë‹ˆë‹¤.",
        "category": "ê¸°ë³¸ê²½ì œê°œë…",
        "difficulty": "easy"
    },
    {
        "question": "ì¤‘ì•™ì€í–‰ì˜ ì£¼ìš” ì—­í• ì€ í†µí™”ì •ì±…ì„ í†µí•´ ê²½ì œë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤.",
        "answer": True,
        "explanation": "ì¤‘ì•™ì€í–‰ì€ í†µí™”ì •ì±…ì„ í†µí•´ ë¬¼ê°€ì•ˆì •ê³¼ ê²½ì œì„±ì¥ì„ ë„ëª¨í•˜ê³ , ê¸ˆìœµì‹œìŠ¤í…œì˜ ì•ˆì •ì„±ì„ ìœ ì§€í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.",
        "category": "ê¸ˆìœµì •ì±…",
        "difficulty": "medium"
    },
    {
        "question": "ì£¼ì‹ì‹œì¥ì—ì„œ ì£¼ê°€ê°€ ìƒìŠ¹í•˜ë©´ ë°˜ë“œì‹œ ê²½ì œê°€ ì¢‹ì•„ì§„ë‹¤ëŠ” ëœ»ì´ë‹¤.",
        "answer": False,
        "explanation": "ì£¼ê°€ ìƒìŠ¹ì´ ë°˜ë“œì‹œ ê²½ì œ ìƒí™©ì´ ì¢‹ì•„ì§„ë‹¤ëŠ” ì˜ë¯¸ëŠ” ì•„ë‹™ë‹ˆë‹¤. ì£¼ê°€ëŠ” ë‹¤ì–‘í•œ ìš”ì¸(ì‹¬ë¦¬, ìœ ë™ì„±, ê¸°ëŒ€ ë“±)ì— ì˜í•´ ë³€ë™í•˜ë©°, ì‹¤ë¬¼ê²½ì œì™€ ì™„ì „íˆ ì¼ì¹˜í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "category": "ì£¼ì‹ì‹œì¥",
        "difficulty": "medium"
    },
    {
        "question": "ë³µë¦¬ë€ ì›ê¸ˆì— ì´ìë¥¼ ë”í•œ ê¸ˆì•¡ì— ëŒ€í•´ ë‹¤ì‹œ ì´ìê°€ ë¶™ëŠ” ê²ƒì„ ë§í•œë‹¤.",
        "answer": True,
        "explanation": "ë³µë¦¬ëŠ” ì›ê¸ˆê³¼ ì´ìë¥¼ í•©í•œ ê¸ˆì•¡ì— ëŒ€í•´ ë‹¤ì‹œ ì´ìê°€ ë¶™ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ íš¨ê³¼ê°€ ì»¤ì§€ëŠ” íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤.",
        "category": "ê¸ˆìœµìƒì‹",
        "difficulty": "easy"
    },
    {
        "question": "ê²½ê¸°ì¹¨ì²´ëŠ” GDPê°€ ì—°ì† 2ë¶„ê¸° ë™ì•ˆ ê°ì†Œí•˜ëŠ” í˜„ìƒì´ë‹¤.",
        "answer": True,
        "explanation": "ì¼ë°˜ì ìœ¼ë¡œ ê²½ê¸°ì¹¨ì²´ëŠ” GDPê°€ ì—°ì† 2ë¶„ê¸°(6ê°œì›”) ë™ì•ˆ ê°ì†Œí•˜ëŠ” í˜„ìƒìœ¼ë¡œ ì •ì˜ë©ë‹ˆë‹¤. ì´ëŠ” ê²½ì œ í™œë™ì´ ì „ë°˜ì ìœ¼ë¡œ ìœ„ì¶•ëœ ìƒíƒœë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.",
        "category": "ê²½ê¸°ë¶„ì„",
        "difficulty": "medium"
    },
    {
        "question": "í™˜ìœ¨ì´ ìƒìŠ¹í•˜ë©´ ìˆ˜ì¶œì´ ì¦ê°€í•˜ê³  ìˆ˜ì…ì´ ê°ì†Œí•œë‹¤.",
        "answer": True,
        "explanation": "í™˜ìœ¨ ìƒìŠ¹(ì›í™” ì•½ì„¸)ì€ ìˆ˜ì¶œ ìƒí’ˆì˜ ê°€ê²© ê²½ìŸë ¥ì„ ë†’ì—¬ ìˆ˜ì¶œì„ ì¦ê°€ì‹œí‚¤ê³ , ìˆ˜ì… ìƒí’ˆì˜ ê°€ê²©ì„ ìƒëŒ€ì ìœ¼ë¡œ ë†’ì—¬ ìˆ˜ì…ì„ ê°ì†Œì‹œí‚µë‹ˆë‹¤.",
        "category": "êµ­ì œê²½ì œ",
        "difficulty": "medium"
    },
    {
        "question": "ì¸í”Œë ˆì´ì…˜ì€ í•­ìƒ ê²½ì œì— ë‚˜ìœ ì˜í–¥ì„ ë¯¸ì¹œë‹¤.",
        "answer": False,
        "explanation": "ì¸í”Œë ˆì´ì…˜ì€ ì ì • ìˆ˜ì¤€(ë³´í†µ 2-3%)ì—ì„œëŠ” ê²½ì œ ì„±ì¥ì— ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê³¼ë„í•œ ì¸í”Œë ˆì´ì…˜ì€ ê²½ì œì— ì•…ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤.",
        "category": "ê¸°ë³¸ê²½ì œê°œë…",
        "difficulty": "hard"
    },
    {
        "question": "ì¤‘ì•™ì€í–‰ì´ ê¸°ì¤€ê¸ˆë¦¬ë¥¼ ì¸ìƒí•˜ë©´ í†µí™”ëŸ‰ì´ ê°ì†Œí•œë‹¤.",
        "answer": True,
        "explanation": "ê¸°ì¤€ê¸ˆë¦¬ ì¸ìƒì€ ì‹œì¤‘ ê¸ˆë¦¬ë¥¼ ìƒìŠ¹ì‹œì¼œ ëŒ€ì¶œì„ ì¤„ì´ê³  ì €ì¶•ì„ ëŠ˜ë ¤ í†µí™”ëŸ‰ì„ ê°ì†Œì‹œí‚¤ëŠ” íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤.",
        "category": "ê¸ˆìœµì •ì±…",
        "difficulty": "hard"
    },
    {
        "question": "ì£¼ì‹ì€ ì±„ê¶Œë³´ë‹¤ ìœ„í—˜í•˜ì§€ë§Œ ìˆ˜ìµë¥ ì´ ë†’ì„ ê°€ëŠ¥ì„±ì´ í¬ë‹¤.",
        "answer": True,
        "explanation": "ì£¼ì‹ì€ ì±„ê¶Œë³´ë‹¤ ë³€ë™ì„±ì´ í¬ê³  ìœ„í—˜ì´ ë†’ì§€ë§Œ, ì¥ê¸°ì ìœ¼ë¡œëŠ” ë” ë†’ì€ ìˆ˜ìµë¥ ì„ ì œê³µí•  ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤.",
        "category": "íˆ¬ììƒì‹",
        "difficulty": "easy"
    }
]

def add_sample_data(api_url="http://localhost:8000"):
    """ìƒ˜í”Œ ë°ì´í„°ë¥¼ APIë¥¼ í†µí•´ ì¶”ê°€"""
    print("ğŸ“ ìƒ˜í”Œ í€´ì¦ˆ ë°ì´í„° ì¶”ê°€ ì¤‘...")
    
    success_count = 0
    error_count = 0
    
    for i, quiz in enumerate(SAMPLE_QUIZZES, 1):
        try:
            response = requests.post(
                f"{api_url}/api/quizzes",
                json=quiz,
                headers={"Content-Type": "application/json"},
                timeout=10
            )
            
            if response.status_code == 200:
                print(f"âœ… í€´ì¦ˆ {i} ì¶”ê°€ ì„±ê³µ: {quiz['question'][:30]}...")
                success_count += 1
            else:
                print(f"âŒ í€´ì¦ˆ {i} ì¶”ê°€ ì‹¤íŒ¨: {response.status_code} - {response.text}")
                error_count += 1
                
        except requests.exceptions.RequestException as e:
            print(f"âŒ í€´ì¦ˆ {i} ì¶”ê°€ ì¤‘ ì˜¤ë¥˜: {e}")
            error_count += 1
        
        # API ë¶€í•˜ ë°©ì§€ë¥¼ ìœ„í•œ ì§§ì€ ëŒ€ê¸°
        time.sleep(0.1)
    
    print(f"\nğŸ“Š ê²°ê³¼: ì„±ê³µ {success_count}ê°œ, ì‹¤íŒ¨ {error_count}ê°œ")
    
    if success_count > 0:
        print("ğŸ‰ ìƒ˜í”Œ ë°ì´í„° ì¶”ê°€ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!")
        print(f"ğŸŒ ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8000 ì— ì ‘ì†í•˜ì—¬ í€´ì¦ˆë¥¼ ì‹œì‘í•˜ì„¸ìš”!")
    else:
        print("âš ï¸  ë°ì´í„° ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. API ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ì„¸ìš”.")

def check_api_health(api_url="http://localhost:8000"):
    """API ì„œë²„ ìƒíƒœ í™•ì¸"""
    try:
        response = requests.get(f"{api_url}/api/categories", timeout=5)
        return response.status_code == 200
    except:
        return False

def main():
    print("ğŸ¯ ê²½ì œ í€´ì¦ˆ ìƒ˜í”Œ ë°ì´í„° ì¶”ê°€ ë„êµ¬")
    print("=" * 50)
    
    # API ì„œë²„ ìƒíƒœ í™•ì¸
    if not check_api_health():
        print("âŒ API ì„œë²„ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
        print("ğŸ’¡ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:")
        print("   1. Docker Composeê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸")
        print("   2. API ì„œë²„ê°€ http://localhost:8000 ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸")
        print("   3. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”")
        return
    
    print("âœ… API ì„œë²„ ì—°ê²° í™•ì¸ë¨")
    add_sample_data()

if __name__ == "__main__":
    main()
